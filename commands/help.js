// In commands/help.js - UPDATED WITH QUANTITY FEATURE DOCUMENTATION

const { SlashCommandBuilder, EmbedBuilder } = require('discord.js');

module.exports = {
    data: new SlashCommandBuilder()
        .setName('help')
        .setDescription('Show all available commands and how to use the bank bot'),
    async execute(interaction) {
        const embed = new EmbedBuilder()
            .setTitle('ü§ñ Clockwork Banker - Command Help')
            .setColor(0x2196F3)
            .setDescription('Here are all the commands you can use with the guild bank bot:')
            .addFields(
                {
                    name: 'üë• **Player Commands**',
                    value: '**`/search ItemName`** - Search for items by full or partial name\n' +
                           '‚Ä¢ Examples: `/search sword`, `/search truth`, `/search sword of truth`\n' +
                           '‚Ä¢ Click item names to add to your cart (quantity 1)\n\n' +
                           '**`/search spell [class]`** - Search for spells by class\n' +
                           '‚Ä¢ Examples: `/search spell wizard`, `/search spell enc`, `/search spell necro`\n' +
                           '‚Ä¢ Supported: mag, nec, wiz, enc, dru, sha, cle, pal, sk, ran, bst, brd, mnk, rog, war\n\n' +
                           '**`/request`** - Open form to request multiple items with quantities\n' +
                           '‚Ä¢ Type items one per line with optional quantity and quality\n' +
                           '‚Ä¢ Examples: "Sword of Flame", "Shield 5", "Robe (Enchanted) 3"\n\n' +
                           '**`/cart`** - View your shopping cart\n' +
                           '**`/cart character:YourName`** - Submit cart as a request\n\n' +
                           '**`/banklist`** - Get link to browse full bank website\n\n' +
                           '**`/help`** - Show this help message',
                    inline: false
                },
                {
                    name: 'üî¢ **Quantity Feature**',
                    value: '‚Ä¢ **Request Form**: Add numbers after item names for quantities\n' +
                           '‚Ä¢ **Examples**: "Sword of Flame 5", "Shield (Enchanted) 2"\n' +
                           '‚Ä¢ **Default**: Items without numbers default to quantity 1\n' +
                           '‚Ä¢ **Cart**: Search buttons add 1x, duplicate items stack automatically\n' +
                           '‚Ä¢ **Display**: Quantities >1 show as "3x Item Name"',
                    inline: false
                },
                {
                    name: 'üìú **Spell Search Tips**',
                    value: '‚Ä¢ Use class abbreviations: mag, nec, wiz, enc, etc.\n' +
                           '‚Ä¢ Spells are sorted alphabetically\n' +
                           '‚Ä¢ Shows all available qualities (Raw/Enchanted/Legendary)\n' +
                           '‚Ä¢ Click spell names to add to cart just like items',
                    inline: false
                },
                {
                    name: 'üõ°Ô∏è **Staff Commands**',
                    value: '**`/fulfill request-id:1234`** - Mark request as completed\n' +
                           '**`/deny request-id:1234 reason:"Out of stock"`** - Deny request\n' +
                           '**`/partial request-id:1234 sent-items:"..." unavailable-items:"..."`** - Partial fulfillment\n' +
                           '‚Ä¢ Staff commands now support quantity tracking in responses',
                    inline: false
                },
                {
                    name: 'üìã **How to Use**',
                    value: '1. **Browse** ‚Üí Use `/banklist` to view full inventory\n' +
                           '2. **Search** ‚Üí Use `/search ItemName` or `/search spell class`\n' +
                           '3. **Add** ‚Üí Click item/spell names to add 1x to cart\n' +
                           '4. **Request Multiple** ‚Üí Use `/request` form for custom quantities\n' +
                           '5. **Submit** ‚Üí Use `/cart character:YourName` to request\n' +
                           '6. **Staff** ‚Üí Processes requests with fulfill/deny/partial commands',
                    inline: false
                },
                {
                    name: 'üí° **Pro Tips**',
                    value: '‚Ä¢ **Mix methods**: Use search buttons for single items, request form for bulk\n' +
                           '‚Ä¢ **Quality + Quantity**: "Sword of Flame (Enchanted) 3" works perfectly\n' +
                           '‚Ä¢ **Cart stacking**: Adding "Shield" twice = "2x Shield" automatically\n' +
                           '‚Ä¢ **Exact names**: Copy from bank website for guaranteed matches',
                    inline: false
                }
            )
            .setFooter({ text: 'Questions? Ask in #bank-requests channel!' });

        await interaction.reply({
            embeds: [embed],
            ephemeral: true
        });
    },
};